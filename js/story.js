
var rubyRedChapters = [
    {},
    {
        id: 1,
        title: "Chapter 1: Ruby’s Red Hoodie",
        image: '<img src="images/chapter1.png" alt="Ruby in her red hoodie">',
        storytext: `Ruby Carter was twelve years old, and everyone called her Red. It wasn’t just because of her bright fiery hair, it was because of the hoodie she wore every single day. The hoodie was soft, cozy, and the color of a ripe apple. Red loved it so much that she felt braver whenever she pulled the hood up, like a superhero putting on her cape.

Red lived in Harlem with her mom, but her favorite place in the whole city was Grandma’s bookshop in Brooklyn. The shop was magical. It smelled of old paper and cocoa, and every shelf seemed to whisper stories waiting to be discovered. Grandma Carter was strong, cheerful, and clever. She didn’t just sell books—she protected them, especially the rare ones that were too valuable to lose.

One chilly evening, Red zipped up her hoodie and slung her backpack over her shoulder. Inside were her comics, a notebook, and a snack for the subway ride.
“Remember, Ruby,” her mom said as she handed her a MetroCard, “stick to the main route, don’t talk to strangers, and keep your phone charged.”
“I know, Mom,” Red said with a grin. “I’ll be fine. I’m going to Grandma’s.”

Her mom kissed her forehead. “That hoodie makes you look fearless. But remember—being careful is just as important as being brave.”
Red nodded, tugged her hood up, and stepped out into the busy New York streets. Cars honked, people hurried past, and the city lights flickered like stars. She felt a little thrill in her chest. Tonight, she was off on an adventure—not through a forest, but through the concrete jungle of New York City.

She loved visiting Grandma’s bookshop in Brooklyn..`,
        previousdesc: "Back to Index",
        previous: "loadChapter(0)",
        nextdesc: "Next Chapter",
        next: "loadChapter(2)"
    },
    {
        id: 2,
        title: "Chapter 2: The Subway Ride",
        image: '<img src="images/chapter2.jpg" alt="Ruby on the subway">',
        storytext: `Ruby zipped up her red hoodie and hurried down the steps to the subway. The air smelled of pretzels and roasted peanuts from the street vendors above. She tapped her MetroCard, pushed through the turnstile, and joined the crowd waiting on the platform.
The train screeched to a stop, doors sliding open. Red squeezed inside, clutching her backpack. She found a seat near the window and pulled out her comic book. The subway rattled and roared as it sped through the tunnels.

Across the car sat a tall man in a sharp gray suit. His shoes were shiny, and his smile looked polite—but his eyes seemed to sparkle in a way that made Red uneasy. He watched the passengers carefully, as if he were searching for something.

Red tugged her hood tighter. She remembered her mom’s words: Stick to the main route. Don’t talk to strangers.
The man leaned forward slightly, noticing her hoodie.

“Nice color,” he said smoothly. “You look like someone who knows about treasures.”
Red kept her eyes on her comic and pretended not to hear. She wasn’t about to start a conversation with a stranger.
The train rattled on, stopping at station after station. The man stayed in his seat, glancing at Red now and then. She felt a shiver run down her spine. Something about him didn’t feel right.

When the train finally reached her stop in Brooklyn, Red hopped off quickly, blending into the crowd. She glanced back once. The man in the suit had also stepped off the train. He was following, though at a distance.

Red’s heart thumped. She pulled up her hood like a cape and hurried toward Grandma’s bookshop.`,
        previousdesc: "Previous",
        previous: "loadChapter(1)",
        nextdesc: "Next Chapter",
        next: "loadChapter(3)"
    },
    {
        id: 3,
        title: "Chapter 3: The Cozy Bookshop",
        image: '<img src="images/chapter3.jpeg" alt="The Cozy Bookshop">',
        storytext: `Ruby hurried down the busy Brooklyn street, her red hoodie glowing under the streetlights. She felt safer the moment she saw the familiar sign swinging above the door: Carter’s Bookshop.

The bell jingled as she stepped inside. Warm light spilled across the shelves, and the smell of cocoa and old paper wrapped around her like a hug.
“Ruby!” Grandma called from behind the counter. She wore her reading glasses low on her nose and had a stack of books beside her. “You’re just in time. I’ve got hot chocolate waiting.”

Red grinned, dropping her backpack. “Perfect. The subway was crowded tonight.”
Grandma chuckled. “That’s New York for you. But here, it’s always calm.”

In the center of the shop stood a tall glass case. Inside was Grandma’s most valuable treasure—a centuries‑old book with golden lettering on its cover. Grandma had told Ruby many times: “This book holds secrets of the city’s past. It must always stay safe.”

Ruby glanced at it now, proud that her grandma was the guardian of something so special.

Just then, the bell jingled again. A tall man in a sharp suit stepped inside. Ruby’s heart skipped—she recognized him. It was the man from the subway.
He smiled politely. “Good evening. What a wonderful shop you have here. May I browse?”
Grandma, always welcoming, nodded. “Of course. Feel free to look around. We love curious readers.”

Ruby tugged at her hoodie. She didn’t like the way his eyes flicked around the shop, especially toward the glass case. She whispered to herself, Stay sharp, Ruby. Something isn’t right.`,
        previousdesc: "Previous",
        previous: "loadChapter(2)",
        nextdesc: "Next Chapter",
        next: "loadChapter(4)"
    },
    {
        id: 4,
        title: "Chapter 4: A Polite Customer",
        image: '<img src="images/chapter4.jpg" alt="A Polite Customer">',
        storytext: `Mr. Wolfgang Wolfe strolled slowly through Grandma’s bookshop, his shiny shoes clicking softly on the wooden floor. He smiled as if he were just another customer, but Ruby kept her eyes on him.

He picked up a book from the shelf and flipped through the pages. “Ah, fascinating,” he said in a smooth voice. “You have quite the collection here.”
Grandma nodded politely. “We do. Stories from every corner of the world. Feel free to browse.”

Wolfe moved from shelf to shelf, pretending to admire the books. But Ruby noticed something strange. He wasn’t really reading. His eyes kept flicking toward the tall glass case in the middle of the shop. Inside was Grandma’s most valuable treasure—the centuries‑old book with golden letters on its cover.
Ruby whispered, “He’s pretending, Grandma. He keeps looking at the case.”

Grandma adjusted her glasses and gave a small nod. “I see it too. Stay sharp, Ruby.”

Wolfe circled closer, pretending to tie his shoe near the case. His hand brushed against the lock as if by accident. Ruby’s heart thumped. She pulled her hood up like a cape and pretended to read her comic, but she was really watching his reflection in the glass.

The shop was quiet, except for the sound of Wolfe’s footsteps. 

Ruby knew he wasn’t here for stories—he was here for something else.`,
        previousdesc: "Previous",
        previous: "loadChapter(3)",
        nextdesc: "Next Chapter",
        next: "loadChapter(5)"
    },
    {
        id: 5,
        title: "Chapter 5: Red’s Suspicion",
        image: '<img src="images/chapter5.jpg" alt="Red’s Suspicion">',
        storytext: `Ruby sat at the reading table, her comic book open in front of her. But she wasn’t really reading. Her eyes kept flicking toward the tall man in the suit.
Mr. Wolfe pretended to browse, pulling books from the shelves and flipping through them quickly. He smiled whenever Grandma glanced his way, but Ruby noticed something important—he never actually read a single page. His eyes were always drifting back to the glass case in the middle of the shop.
Ruby whispered, “Grandma, he’s not here for stories. He keeps staring at the case.”

Grandma adjusted her glasses and gave a small nod. “I see it too. Let’s stay calm. We’ll watch and wait.”

Ruby pulled her hood up like a cape. She wanted to look brave, even though her heart was thumping. She pretended to study her comic, but she angled it so she could see Wolfe’s reflection in the glass case.

Sure enough, he circled closer. He bent down as if to tie his shoe, but his hand brushed against the lock. Ruby’s stomach tightened.
He’s pretending to be a customer, she thought. But he’s really after Grandma’s book.

Ruby knew she had to act. She slipped her phone out of her pocket and held it low, snapping a quick picture of Wolfe near the case. Then she typed a short message to the neighborhood watch group: "Suspicious man in Grandma’s shop. Please come quickly."

She hit send and tucked her phone away.

Now it was a waiting game. Ruby’s eyes stayed sharp, her hoodie pulled tight. She was ready.`,
        previousdesc: "Previous",
        previous: "loadChapter(4)",
        nextdesc: "Next Chapter",
        next: "loadChapter(6)"
    },
    {
        id: 6,
        title: "Chapter 6: The Clever Plan",
        image: '<img src="images/chapter6.jpg" alt="The Clever Plan">',
        storytext: `Ruby’s heart thumped as she watched Mr. Wolfe circle closer to the glass case. He bent down again, pretending to tie his shoe, but this time she saw something glint in his hand—a tiny tool, like a pick.

He’s going to try the lock, Ruby thought.

She pulled her hood up tight, like a superhero cape, and slipped her phone out of her pocket. Holding it low, she snapped another picture. Then she quickly typed a message to the neighborhood watch group: "Suspicious man in Grandma’s shop. Please come quickly."

She pressed send and tucked her phone away.

Grandma kept busy at the counter, stacking books, but Ruby could tell she was watching too. Her eyes flicked toward Wolfe, sharp behind her glasses.

Mr. Wolfe straightened up, pretending to admire a book on the shelf. “Such rare treasures you have here,” he said smoothly. “I’ve never seen a shop quite like this.”

Ruby pretended to read her comic, but her eyes stayed locked on his reflection in the glass. She was ready. If he tried anything, she would catch him.
The shop was quiet, the air heavy with suspense. Ruby’s clever plan was in motion. 

Help was on the way.`,
        previousdesc: "Previous",
        previous: "loadChapter(5)",
        nextdesc: "Next Chapter",
        next: "loadChapter(7)"
    },
    {
        id: 7,
        title: "Chapter 7: The Community Arrives",
        image: '<img src="images/chapter7.jpg" alt="The Community Arrives">',
        storytext: `The shop was quiet except for the soft creak of the floorboards as Mr. Wolfe circled closer to the glass case. Ruby’s heart pounded. She knew help was on the way, but would it arrive in time?

Just as Wolfe bent down again, the bell above the door jingled.

“Evening, Grandma Carter!” called Mrs. Lopez, the friendly baker from next door. She carried a basket of fresh rolls.

Behind her came Mr. Singh, the corner store owner, with a bag of fruit. And right after them stepped Officer Daniels, the neighborhood policeman, tipping his cap.
Ruby’s phone buzzed in her pocket. Her message had worked—the neighbors were here.

Wolfe straightened up quickly, startled by the sudden crowd. His sly smile flickered.

Grandma folded her arms. “Looking for something special, sir?” she asked firmly.

Ruby pulled her hood up like a cape and stepped forward. “Or were you just pretending to browse?”

The neighbors looked at Wolfe, their eyes sharp. He shifted uncomfortably, realizing he was surrounded.

The cozy bookshop didn’t feel quiet anymore. It felt strong, like a fortress filled with friends.`,
        previousdesc: "Previous",
        previous: "loadChapter(6)",
        nextdesc: "Next Chapter",
        next: "loadChapter(8)"
    },
    {
        id: 8,
        title: "Chapter 8: The Wolf is Caught",
        image: '<img src="images/chapter8.jpg" alt="The Wolf is Caught">',
        storytext: `Mr. Wolfe’s sly smile faded as more neighbors stepped into the shop. The cozy little bookstore suddenly felt crowded, and all eyes were on him.
He tried to laugh it off. “Ah, such a popular place! I was only browsing, of course.”

But Ruby saw the small tool still hidden in his hand. She stepped forward, her red hood pulled up like a cape. “You weren’t browsing. You were trying to open the case.”

The neighbors gasped. Grandma folded her arms, her voice firm. “This shop is for readers, not thieves.”

Mr. Wolfe’s face turned pale. He backed toward the door, but Officer Daniels blocked his path. “That’s far enough, sir,” the officer said.

Wolfe looked around, trapped. His smooth words had failed, and his sneaky plan was ruined.

Mrs. Lopez shook her head. “Shame on you, trying to steal from Grandma Carter’s shop.”

Mr. Singh added, “Books belong to everyone. You can’t take them for yourself.”

Officer Daniels took Wolfe by the arm. “You’ll have to come with me.”

Ruby felt her heart slow down. The danger was over. Wolfe had been caught, and the book was safe.

Grandma smiled proudly at her granddaughter. “You were brave, Ruby. You saw through his disguise.”
Ruby grinned. “And we stopped him together."`,
        previousdesc: "Previous",
        previous: "loadChapter(7)",
        nextdesc: "Next Chapter",
        next: "loadChapter(9)"
    },
    {
        id: 9,
        title: "Chapter 9: Hot Chocolate Victory",
        image: '<img src="images/chapter9.jpg" alt="Hot Chocolate Victory">',
        storytext: `Ruby zipped up her red hoodie and hurried down the steps to the subway. The air smelled of pretzels and roasted peanuts from the street vendors above. She tapped her MetroCard, pushed through the turnstile, and joined the crowd waiting on the platform.
The train screeched to a stop, doors sliding open. Red squeezed inside, clutching her backpack. She found a seat near the window and pulled out her comic book. The subway rattled and roared as it sped through the tunnels.

Across the car sat a tall man in a sharp gray suit. His shoes were shiny, and his smile looked polite—but his eyes seemed to sparkle in a way that made Red uneasy. He watched the passengers carefully, as if he were searching for something.

Red tugged her hood tighter. She remembered her mom’s words: Stick to the main route. Don’t talk to strangers.
The man leaned forward slightly, noticing her hoodie.

“Nice color,” he said smoothly. “You look like someone who knows about treasures.”
Red kept her eyes on her comic and pretended not to hear. She wasn’t about to start a conversation with a stranger.
The train rattled on, stopping at station after station. The man stayed in his seat, glancing at Red now and then. She felt a shiver run down her spine. Something about him didn’t feel right.

When the train finally reached her stop in Brooklyn, Red hopped off quickly, blending into the crowd. She glanced back once. The man in the suit had also stepped off the train. He was following, though at a distance.

Red’s heart thumped. She pulled up her hood like a cape and hurried toward Grandma’s bookshop.`,
        previousdesc: "Previous",
        previous: "loadChapter(8)",
        nextdesc: "Next Chapter",
        next: "loadChapter(0)"
    },
    {}
];

var id = getParameter("id");
var chapter = rubyRedChapters[id];

function getParameter(id) {
    let params = new URLSearchParams(window.location.search);
    id = params.get(id);

    window.onload = () => loadChapter(id);
}
function loadChapter(id) {

    if (speechSynthesis) {
        speechSynthesis.cancel();
    }

    var chapter = rubyRedChapters[id];

    //   if (!chapter) return;

    document.getElementById("chapter-title").innerText = chapter.title;
    document.getElementById("chapter-image").innerHTML = chapter.image;
    document.getElementById("storytext").innerHTML = chapter.storytext;

    // Update the text

    if (id == 1) {
        var navbtns = `<a href="index.html">Back to Index</a> |
    <a href="#" onclick="`+ chapter.next + `">` + chapter.nextdesc + `</a>`;
    } else if (id == 9) {
        var navbtns = `<a href="#" onclick="` + chapter.next + `">` + chapter.nextdesc + `</a> |
            <a href="index.html">Back to Index</a>`;
    } else {
        var navbtns = `<a href="#" onclick="` + chapter.previous + `">` + chapter.previousdesc + `</a> |
    <a href="#" onclick="`+ chapter.next + `">` + chapter.nextdesc + `</a>`;
    }

    document.getElementById("navbtns").innerHTML = navbtns;

    document.querySelector('pre').scrollTop = 0;
}


function speakText() {
    const text = document.getElementById("storytext").innerText;

    const utterance = new SpeechSynthesisUtterance(text);

    // Voice style settings
    utterance.pitch = 1.3;      // slightly higher pitch
    utterance.rate = 0.9;       // slower, gentle pacing
    utterance.volume = 0.9;     // softer volume

    // Optional: choose a specific voice if available
    const voices = speechSynthesis.getVoices();
    const gentleVoice = voices.find(v =>
        v.name.toLowerCase().includes("child") ||
        v.name.toLowerCase().includes("girl") ||
        v.name.toLowerCase().includes("young")
    );

    utterance.voice = gentleVoice;

    speechSynthesis.speak(utterance);
}